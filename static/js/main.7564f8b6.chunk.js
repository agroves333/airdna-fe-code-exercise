(this["webpackJsonpairdna-fe-code-exercise"]=this["webpackJsonpairdna-fe-code-exercise"]||[]).push([[0],{47:function(e,t,n){"use strict";n.r(t);var r,i=n(0),c=n.n(i),o=n(33),s=n.n(o),l=n(2),a=n(49),d=n(23),j=n(17),u=n.n(j),b=n(28),h=n(7),x=n(48),O=n(15),m=n(1),v=function(){var e=g(),t=e.errors,n=e.setErrors;return Object(m.jsx)(x.f,{gap:1,sx:{position:"fixed",bottom:"0.5rem",right:"0.5rem",gridAutoRows:"auto"},children:t.map((function(e,t){return Object(m.jsxs)(x.a,{bg:"error",children:[Object(m.jsx)(x.j,{children:e}),Object(m.jsx)(x.c,{onClick:function(){return function(e){n((function(t){return t.filter((function(t,n){return e!==n}))}))}(t)},ml:"auto",mr:-2})]},"error-".concat(t))}))})},f=c.a.createContext(null),p=function(e){var t=e.children,n=Object(i.useState)([]),r=Object(h.a)(n,2),c=r[0],o=r[1];return Object(m.jsxs)(f.Provider,{value:{errors:c,setErrors:o},children:[t,Object(m.jsx)(v,{})]})},g=function(){var e=Object(i.useContext)(f);if(void 0===e)throw new Error("useError can only be used inside ErrorProvider");return e};!function(e){e[e.F=0]="F",e[e.C=1]="C"}(r||(r={}));var w=c.a.createContext(null),y=function(e){var t=e.children,n=Object(i.useState)(""),c=Object(h.a)(n,2),o=c[0],s=c[1],l=Object(i.useState)(null),a=Object(h.a)(l,2),d=a[0],j=a[1],x=Object(i.useState)(r.F),v=Object(h.a)(x,2),f=v[0],p=v[1],y=Object(i.useState)(!1),S=Object(h.a)(y,2),C=S[0],z=S[1],k=g().setErrors,F=Object(i.useCallback)(Object(b.a)(u.a.mark((function e(){var t,n,r,i,c,s,l,a,d,b,x,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.prev=1,e.next=4,fetch("/api/location/search/?query=".concat(o));case 4:return c=e.sent,e.next=7,null===c||void 0===c?void 0:c.json();case 7:return s=e.sent,e.next=10,fetch("/api/location/".concat(null===(t=s[0])||void 0===t?void 0:t.woeid,"/"));case 10:return l=e.sent,e.next=13,null===l||void 0===l?void 0:l.json();case 13:a=e.sent,d=null===a||void 0===a||null===(n=a.latt_long)||void 0===n?void 0:n.split(","),b=Object(h.a)(d,2),x=b[0],m=b[1],j({forecast:null===a||void 0===a||null===(r=a.consolidated_weather)||void 0===r?void 0:r.map((function(e){return{id:null===e||void 0===e?void 0:e.id,date:null===e||void 0===e?void 0:e.applicable_date,icon:null===e||void 0===e?void 0:e.weather_state_abbr,high:null===e||void 0===e?void 0:e.max_temp,low:null===e||void 0===e?void 0:e.min_temp,temp:null===e||void 0===e?void 0:e.the_temp,windDirection:null===e||void 0===e?void 0:e.wind_direction,windSpeed:null===e||void 0===e?void 0:e.wind_speed,weatherState:null===e||void 0===e?void 0:e.weather_state_name,pressure:null===e||void 0===e?void 0:e.air_pressure,humidity:null===e||void 0===e?void 0:e.humidity,visibility:null===e||void 0===e?void 0:e.visibility}})),cityState:"".concat(null===a||void 0===a?void 0:a.title,", ").concat(null===a||void 0===a||null===(i=a.parent)||void 0===i?void 0:i.title),timezone:null===a||void 0===a?void 0:a.timezone,lat:x,lng:m}),z(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(1),j(null),z(!1),k((function(t){return[null===e.t0||void 0===e.t0?void 0:e.t0.message].concat(Object(O.a)(t))}));case 24:case"end":return e.stop()}}),e,null,[[1,19]])}))),[j,o]);return Object(m.jsx)(w.Provider,{value:{weather:d,setWeather:j,searchTerm:o,setSearchTerm:s,searchForecast:F,tempUnit:f,setTempUnit:p,convert:function(e){return e&&f===r.F?(t=e)&&Math.round(9*t/5+32):Math.round(Number(e));var t},loading:C},children:t})},S=function(){var e=Object(i.useContext)(w);if(void 0===e)throw new Error("useWeather can only be used inside WeatherProvider");return e},C=n(26),z=n.n(C),k=n(21),F=function(e){var t=e.id,n=e.date,r=e.icon,i=e.high,c=e.low,o=e.windDirection,s=e.windSpeed,l=e.humidity,a=e.visibility,d=e.pressure,j=S().convert;return Object(m.jsxs)(x.e,{sx:{flexDirection:["row","column"],flexWrap:["wrap",null],alignItems:["center",null],justifyContent:["space-between","center"],bg:"muted",borderRadius:"0.25rem",width:"100%"},p:3,children:[Object(m.jsxs)(x.e,{sx:{flexDirection:["row","column"],flexWrap:"wrap",justifyContent:["space-between",null],alignItems:"center"},children:[Object(m.jsx)(x.j,{mr:[4,0],mb:[0,2],sx:{fontSize:[2,3],textAlign:"center"},children:z()(n).format("ddd")}),Object(m.jsx)(x.g,{mb:[0,2],sx:{maxWidth:"3em"},src:"https://www.metaweather.com/static/img/weather/".concat(r,".svg"),alt:""}),Object(m.jsxs)(x.e,{mb:[0,2],children:[Object(m.jsxs)(x.j,{mr:1,sx:{fontSize:3},children:[j(i),"\xb0"]}),"/",Object(m.jsxs)(x.j,{ml:1,color:"gray",sx:{fontSize:3},children:[j(c),"\xb0"]})]}),Object(m.jsxs)(x.e,{mt:[2,null],sx:{alignItems:"center"},children:[Object(m.jsx)(x.b,{mr:2,sx:{width:"1rem",height:"1rem"},children:Object(m.jsx)(k.c,{})}),Object(m.jsx)(x.b,{mr:2,sx:{transform:"rotate(".concat(o,"deg)"),width:"1rem",height:"1rem"},children:Object(m.jsx)(k.a,{})}),Object(m.jsxs)(x.j,{sx:{fontSize:1},children:[Math.round(s||0),"mph"]})]})]}),Object(m.jsxs)(x.e,{mt:[3,null],sx:{width:"100%",flexDirection:["row","column"],justifyContent:["space-between",null],textAlign:"center"},children:[Object(m.jsxs)(x.b,{sx:{fontSize:1},children:[Object(m.jsx)(x.j,{sx:{fontWeight:"bold",display:"block"},children:"Humidity"}),Object(m.jsxs)(x.j,{children:[l,"%"]})]}),Object(m.jsxs)(x.b,{sx:{fontSize:1},children:[Object(m.jsx)(x.j,{sx:{fontWeight:"bold",display:"block"},children:"Visibility"}),Object(m.jsxs)(x.j,{children:[Math.round(10*Number(a))/10," mi."]})]}),Object(m.jsxs)(x.b,{sx:{fontSize:1},children:[Object(m.jsx)(x.j,{sx:{fontWeight:"bold",display:"block"},children:"Pressure"}),Object(m.jsxs)(x.j,{children:[d," mb"]})]})]})]},t)},_=function(e){var t,n=Object.assign({},e),r=S().weather;return Object(m.jsx)(x.b,{sx:{position:"relative",width:"100%"},children:Object(m.jsx)(x.f,Object(l.a)(Object(l.a)({gap:2,sx:{gridAutoFlow:["row","column"]}},n),{},{children:null===r||void 0===r||null===(t=r.forecast)||void 0===t?void 0:t.map((function(e){return e&&Object(m.jsx)(F,Object(l.a)({},e),null===e||void 0===e?void 0:e.id)}))}))})},T=function(){return Object(m.jsx)(x.e,{p:3,sx:{height:"5rem",alignItems:"center",bg:"primary"},children:Object(m.jsx)(x.j,{color:"white",sx:{fontSize:3},children:"Weather"})})},W=n(5),D=function(e){var t=e.handleKeydown,n=e.handleChange,r=e.searchTerm,i=e.sx,c=Object(W.a)(e,["handleKeydown","handleChange","searchTerm","sx"]);return Object(m.jsxs)(x.b,Object(l.a)(Object(l.a)({m:"auto",sx:Object(l.a)({position:"relative"},i)},c),{},{children:[Object(m.jsx)(x.h,{value:r,onChange:n,onKeyDown:t,placeholder:"Enter city"}),Object(m.jsx)(x.b,{sx:{position:"absolute",right:"1rem",top:"0.625rem"},color:"primary",children:Object(m.jsx)(k.b,{})})]}))},E=n(34),I=n.n(E),P=function(e){var t,n=Object.assign({},e),i=S(),c=i.weather,o=i.tempUnit,s=i.setTempUnit,a=i.convert,d=(null===c||void 0===c||null===(t=c.forecast)||void 0===t?void 0:t[0])||null,j=function(e){s(e)};return c&&Object(m.jsxs)(x.e,Object(l.a)(Object(l.a)({sx:{flexDirection:["column","row"],justifyContent:"space-between"}},n),{},{children:[Object(m.jsxs)(x.e,{mb:[3,null],sx:{alignItems:"center"},children:[Object(m.jsx)(x.g,{mb:[0,2],mr:2,sx:{height:"4rem"},src:"https://www.metaweather.com/static/img/weather/".concat(null===d||void 0===d?void 0:d.icon,".svg"),alt:""}),Object(m.jsxs)(x.e,{sx:{alignItems:"flex-start"},children:[Object(m.jsx)(x.j,{sx:{fontSize:7,lineHeight:1},children:a(null===d||void 0===d?void 0:d.temp)}),Object(m.jsxs)(x.b,{sx:{fontSize:3,cursor:"pointer",alignSelf:"flex-start"},children:[Object(m.jsx)(x.j,{sx:{fontWeight:o===r.F?"bold":"body"},onClick:function(){return j(r.F)},children:"\xb0F"})," ","|"," ",Object(m.jsx)(x.j,{sx:{fontWeight:o===r.C?"bold":"body"},onClick:function(){return j(r.C)},children:"\xb0C"})]})]})]}),Object(m.jsxs)(x.e,{sx:{flexDirection:"column",justifyContent:"center",textAlign:["left","right"]},children:[Object(m.jsx)(x.j,{sx:{fontSize:4},children:null===c||void 0===c?void 0:c.cityState}),Object(m.jsx)(x.j,{sx:{fontSize:2},color:"gray",children:(null===c||void 0===c?void 0:c.timezone)&&I()(Date()).tz(c.timezone).format("dddd LT")}),Object(m.jsx)(x.j,{sx:{fontSize:2},color:"gray",children:null===d||void 0===d?void 0:d.weatherState})]})]}))},A=function(){return Object(m.jsx)(x.e,{sx:{justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},children:Object(m.jsx)(x.j,{sx:{fontSize:4},children:"No Results Found. Please try a different location"})})},M=function(){return Object(m.jsx)(x.e,{sx:{position:"fixed",top:0,right:0,bottom:0,left:0,justifyContent:"center",alignItems:"center",width:"100%",height:"100%",bg:"rgba(255,255,255,0.7)"},children:Object(m.jsx)(x.i,{})})},K=function(){var e=Object(i.useState)(!1),t=Object(h.a)(e,2),n=t[0],r=t[1],c=S(),o=c.searchTerm,s=c.setSearchTerm,l=c.searchForecast,a=c.weather,d=c.loading,j=Object(i.useCallback)(function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.code){e.next=4;break}return e.next=3,l();case 3:r(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),O=Object(i.useCallback)((function(e){s(e.target.value)}),[s]);return Object(m.jsxs)(x.d,{children:[Object(m.jsx)(T,{}),Object(m.jsxs)(x.b,{m:4,children:[Object(m.jsx)(D,{mt:4,handleChange:O,handleKeydown:j,searchTerm:o}),a&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(P,{mt:4}),Object(m.jsx)(_,{my:4})]}),n&&!a&&Object(m.jsx)(A,{})]}),d&&Object(m.jsx)(M,{})]})},U=n(22),L=Object(l.a)(Object(l.a)({},d.a),{},{breakpoints:["50rem","60rem"],colors:Object(l.a)(Object(l.a)({},null===d.a||void 0===d.a?void 0:d.a.colors),{},{error:"#b80000"})}),N=function(){return Object(U.a)(a.a,{theme:L,children:Object(U.a)(p,{children:Object(U.a)(y,{children:Object(U.a)(K,{})})})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),c(e),o(e)}))};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(N,{})}),document.getElementById("root")),R()}},[[47,1,2]]]);
//# sourceMappingURL=main.7564f8b6.chunk.js.map